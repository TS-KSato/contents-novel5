<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>é‹å‘½ã®éŠ€ç«œæš¦ï½œä»Šæ—¥ã®å°ãæ‰‹ï¼ˆæœ‰æ–™ï¼‰</title>
  <meta name="description" content="æœˆãƒ»æ—¥ã¨æ€§åˆ¥ã‚’å…¥åŠ›ã—ã¦ã€ã‚¨ãƒ†ãƒ«ãƒŠãƒªã‚¢ã®ä¸»è¦ç™»å ´äººç‰©9åã‹ã‚‰ä»Šæ—¥ã‚ãªãŸã‚’å°ãæ¡ˆå†…å½¹ã‚’è¨ºæ–­ã—ã¾ã™ã€‚">
  <style>
    :root {
      --bg: #0b0d12;
      --ink: #fff;
      --muted: #aeb7d0;
      --line: #27304a;
      --card: #151826;
      --primary: #1a3358;
      --primary-b: #34507c;
      --accent: #9fd3ff;
      --radius: 16px;
      --pad: 18px;
      --gap: 12px;
      --tap: 48px;
      --shadow: 0 12px 28px rgba(0, 0, 0, .28);
    }
    *{box-sizing:border-box}
    html{font-size:16px}
    body{
      margin:0;background:var(--bg);color:var(--ink);
      font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Sans","Noto Sans JP",sans-serif;
      line-height:1.7;-webkit-text-size-adjust:100%;
    }
    .wrap{max-width:40rem;margin:0 auto;padding:20px 14px 92px} /* ä¸‹ãƒŠãƒ“åˆ†ã®ä½™ç™½ã‚’å¢—é‡ */

    header{text-align:center;margin:4px 0 14px}
    h1{margin:8px 0 4px;font-size:clamp(22px,6vw,28px);letter-spacing:.02em}
    .lead{color:var(--muted);font-size:15px;margin:4px auto 0;max-width:34rem}

    .card{
      background:var(--card);border:1px solid var(--line);border-radius:20px;
      padding:20px;box-shadow:var(--shadow);margin:14px 0;
    }
    .label{font-weight:800;color:#cfe1ff;margin:0 0 8px}

    .form{display:grid;grid-template-columns:1fr;row-gap:16px}
    .field{display:block}
    .field label{display:block;font-weight:700;font-size:15px;color:#d9e2ff;margin:0 0 6px}

    select,button{
      width:100%;min-height:var(--tap);padding:12px 14px;border-radius:14px;
      border:1px solid var(--line);background:#1a2034;color:#fff;font-size:16px;
    }
    select:focus-visible,button:focus-visible{outline:2px solid var(--accent);outline-offset:2px}

    .radios{display:flex;gap:8px;flex-wrap:wrap}
    .radio{
      display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border:1px solid var(--line);
      border-radius:999px;background:#11172a;cursor:pointer;user-select:none;transition:.15s ease;
    }
    .radio input{display:none}
    .radio input:checked + span{
      color:#fff;background:#34507c;border-radius:999px;padding:4px 10px;
      box-shadow:0 0 0 2px rgba(159,211,255,.25) inset;
    }
    .radio span{color:#cfe1ff;font-size:14px}

    .primary{background:var(--primary);border-color:var(--primary-b);font-weight:800;letter-spacing:.02em}
    .primary:hover{filter:brightness(1.05)}
    .cta-area{margin-top:10px}

    .err{
      margin-top:8px;color:#ff9aa8;background:#2a1218;border:1px solid #5b2a33;
      padding:8px 10px;border-radius:10px;font-size:14px;display:none;
    }

    .partner{display:flex;gap:12px;align-items:center}
    .avatar{
      width:56px;height:56px;border-radius:50%;border:1px solid var(--line);
      background:#10172a;display:flex;align-items:center;justify-content:center;font-weight:800
    }
    .pname{font-weight:800}
    .prole{color:#cdd5ea;font-size:14px}
    .line{margin-top:6px;color:#e0e7ff;font-size:16px}

    /* çµæœæ¼”å‡º */
    .fadein{animation:fadeIn .6s ease both}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)}}

    footer{text-align:center;color:var(--muted);font-size:12.5px;margin-top:12px}

    /* ==== Bottom Navï¼ˆ3ã‚¿ãƒ–çµ±ä¸€ï¼‰ ==== */
    .bottom-nav{
      position:fixed;left:0;right:0;bottom:0;z-index:20;
      background:#121821;border-top:1px solid rgba(141,208,255,.25);
    }
    .bn-grid{display:grid;grid-template-columns:repeat(3,1fr);max-width:40rem;margin:0 auto}
    .bn-btn{
      display:flex;flex-direction:column;align-items:center;gap:2px;
      padding:10px 0;color:var(--ink);text-decoration:none;font-size:14px;
    }
    .bn-accent{background:rgba(141,208,255,.15)}
    .bn-btn:focus-visible{outline:2px solid var(--accent);outline-offset:-2px}

    @media print{
      .bottom-nav{display:none}
      body{background:#fff;color:#000}
      .card{border-color:#999;box-shadow:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ä»Šæ—¥ã®å°ãæ‰‹</h1>
      <p class="lead">
        ã“ã“ã¯ã‚¨ãƒ†ãƒ«ãƒŠãƒªã‚¢ã®æ˜Ÿå è¡“å¸«ã«ã‚ˆã‚‹è¨ºæ–­ã€‚<br>
        æœˆãƒ»æ—¥ã¨æ€§åˆ¥ã‚’é¸ã¶ã¨ã€ä»Šæ—¥ã‚ãªãŸã‚’å°ãæ¡ˆå†…å½¹ãŒç¾ã‚Œã¾ã™ã€‚
      </p>
    </header>

    <!-- å…¥åŠ› -->
    <section class="card" aria-labelledby="lab-input">
      <div id="lab-input" class="label">å…¥åŠ›</div>
      <div class="form" role="group" aria-label="èª•ç”Ÿæ—¥ã¨æ€§åˆ¥ã®å…¥åŠ›">
        <div class="field">
          <label for="month">ç”Ÿã¾ã‚ŒãŸæœˆ</label>
          <select id="month" aria-label="æœˆã‚’é¸æŠ">
            <option value="" hidden>æœˆã‚’é¸ã¶</option>
          </select>
        </div>

        <div class="field">
          <label for="day">ç”Ÿã¾ã‚ŒãŸæ—¥</label>
          <select id="day" aria-label="æ—¥ã‚’é¸æŠ">
            <option value="" hidden>æ—¥ã‚’é¸ã¶</option>
          </select>
        </div>

        <div class="field">
          <label>æ€§åˆ¥</label>
          <div class="radios" role="group" aria-label="æ€§åˆ¥">
            <label class="radio"><input type="radio" name="gender" value="ç”·æ€§" checked><span>ç”·æ€§</span></label>
            <label class="radio"><input type="radio" name="gender" value="å¥³æ€§"><span>å¥³æ€§</span></label>
            <label class="radio"><input type="radio" name="gender" value="ãã®ä»–"><span>ãã®ä»–</span></label>
            <label class="radio"><input type="radio" name="gender" value="å›ç­”ã—ãªã„"><span>å›ç­”ã—ãªã„</span></label>
          </div>
        </div>
      </div>

      <div class="cta-area">
        <button id="btnGo" class="primary">ä»Šæ—¥ã®å°ãæ‰‹ã‚’è¦‹ã‚‹</button>
      </div>
      <div id="formErr" class="err" role="alert" aria-live="assertive"></div>
      <p class="lead" style="margin-top:8px;font-size:13px">
        â€» ç”Ÿå¹´æœˆæ—¥ã¯<strong>æœˆã¨æ—¥</strong>ã®ã¿ã€‚å¹´ã®å…¥åŠ›ã¯ä¸è¦ã§ã™ã€‚
      </p>
    </section>

    <!-- çµæœ -->
    <section id="result" role="region" aria-labelledby="p-lab" aria-live="polite"></section>

    <footer>Â© é‹å‘½ã®éŠ€ç«œæš¦</footer>
  </div>

  <!-- Bottom Navï¼ˆ3ã‚¿ãƒ–ï¼šãƒ›ãƒ¼ãƒ ï¼ãŠçŸ¥ã‚‰ã›ï¼ãƒã‚¤ãƒšãƒ¼ã‚¸ï¼‰ -->
  <nav class="bottom-nav" aria-label="ä¸»è¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
    <div class="bn-grid">
      <a class="bn-btn" href="./index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
      <a class="bn-btn" href="./notice.html">ğŸ“£ ãŠçŸ¥ã‚‰ã›</a>
      <a class="bn-btn" href="./mypage.html">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
    </div>
  </nav>

  <script>
    // ====== ã‚»ãƒ¬ã‚¯ãƒˆåˆæœŸåŒ–ï¼šæœˆ1â€“12ã€æ—¥1â€“31 ======
    const monthSel = document.getElementById("month");
    const daySel = document.getElementById("day");
    const errBox = document.getElementById("formErr");

    for (let m = 1; m <= 12; m++) {
      const o = document.createElement("option");
      o.value = String(m); o.textContent = String(m);
      monthSel.appendChild(o);
    }
    function buildDayOptions(n) {
      daySel.innerHTML = '<option value="" hidden>æ—¥ã‚’é¸ã¶</option>';
      for (let d = 1; d <= n; d++) {
        const o = document.createElement("option");
        o.value = String(d); o.textContent = String(d);
        daySel.appendChild(o);
      }
    }
    buildDayOptions(31);

    function daysIn(m, y) {
      return [31, ((y % 4 === 0 && y % 100 !== 0) || y % 400 === 0) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][m - 1];
    }
    function reflowDays() {
      const y = new Date().getFullYear();
      const m = Number(monthSel.value || 0);
      if (!m) { buildDayOptions(31); return; }
      const n = daysIn(m, y);
      const prev = daySel.value;
      buildDayOptions(n);
      if (prev && Number(prev) <= n) { daySel.value = prev; }
    }
    monthSel.addEventListener("change", reflowDays);
    window.addEventListener("pageshow", reflowDays);

    // ====== æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰ ======
    const CHARACTERS = [
      { id: "alan",   name: "ã‚¢ãƒ©ãƒ³",   role: "è‹¥ãå®ˆã‚Šæ‰‹",   lines: ["ã§ãã‚‹ã“ã¨ã‚’ä¸‰ã¤ã€‚çµ‚ã‚ã£ãŸã‚‰èƒ¸ã‚’å¼µã‚ã†ã€‚", "æ€–ã„ãªã‚‰ä¸€ç·’ã«è¡Œã“ã†ã€‚è¶³ã¯äºŒäººåˆ†ã§è»½ããªã‚‹ã€‚"] },
      { id: "laila",  name: "ãƒ©ã‚¤ãƒ©",   role: "å¤ãèªã‚Šéƒ¨",   lines: ["æ€¥ãè©±ã»ã©è…°ã‚’æ®ãˆã¦èã“ã†ã€‚çœŸã¯é™ã‘ã•ã®ä¸­ã«ã‚ã‚‹.", "ä¼‘æ¯ã¯ç‰©èªã®é–“ï¼ˆã¾ï¼‰ã€‚é–“ãŒã‚ã‚‹ã‹ã‚‰éŸ¿ãã®ã ã€‚"] },
      { id: "drake",  name: "ãƒ‰ãƒ¬ã‚¤ã‚¯", role: "å‹‡è€…ã®å‰£å£«",   lines: ["åˆƒã‚’æŠœãå‰ã«ã€å¿ƒã‚’æŠœã‘ã€‚æ±ºã‚ã‚‹ã®ã¯è¦šæ‚Ÿã ã€‚", "ä»²é–“ã‚’ä¿¡ã˜ã‚ã€‚èƒŒä¸­ã¯ãã‚Œã§å®ˆã‚‰ã‚Œã‚‹ã€‚"] },
      { id: "nester", name: "ãƒã‚¹ã‚¿ãƒ¼", role: "é¢¨ã®å°ãæ‰‹",   lines: ["é«˜ãé£›ã¹ã°é ããŒè¦‹ãˆã‚‹ã€‚è¦–ç‚¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§è§£ã‘ã‚‹è¬ãŒã‚ã‚‹ã€‚", "åœ°å›³ã‚’åºƒã’ã‚ˆã€‚é“ã¯ä¸€æœ¬ã§ã¯ãªã„ã€‚"] }
      // æœ¬ç•ªã¯ 9 åã«æ‹¡å¼µäºˆå®šï¼ˆJSONå¤–éƒ¨åŒ–å¯ï¼‰
    ];
    function hashStr(s){let h=2166136261>>>0;for(let i=0;i<s.length;i++){h^=s.charCodeAt(i);h=Math.imul(h,16777619)}return h>>>0}
    function pick(len, seed){return hashStr(seed)%len}
    function todayKey(){const d=new Date();return `${d.getFullYear()}-${d.getMonth()+1}-${d.getDate()}`}

    const resultEl = document.getElementById("result");

    function showError(msg){
      errBox.textContent = msg || "";
      errBox.style.display = msg ? "block" : "none";
    }

    function renderResult(p, line){
      resultEl.innerHTML = `
        <div class="card fadein" aria-labelledby="p-lab">
          <div id="p-lab" class="label">ä»Šæ—¥ã®å°ãæ‰‹</div>
          <div class="partner">
            <div class="avatar" aria-hidden="true">${p.name.slice(0,2)}</div>
            <div><div class="pname">${p.name}</div><div class="prole">${p.role}</div></div>
          </div>
          <p class="line">ã€Œ${line}ã€</p>
          <small class="lead" style="display:block;margin-top:6px;font-size:13px;color:var(--muted)">
            â€» æœ¬æ—¥ã¯ç«¯æœ«æ—¥ä»˜ã«åŸºã¥ãä¸€æ„ã«æ±ºå®šã•ã‚Œã¾ã™ã€‚æœˆãƒ»æ—¥ãƒ»æ€§åˆ¥ã«ã‚ˆã‚Šã€æ¥è¨ªè€…ã”ã¨ã«çµæœãŒç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
          </small>
        </div>`;
      // GA4 ä¾‹: window.dataLayer?.push({event:"view_partner_result", character:p.id});
    }

    document.getElementById("btnGo").addEventListener("click", () => {
      showError(""); // ã‚¯ãƒªã‚¢
      const mm = monthSel.value;
      const dd = daySel.value;
      if (!mm || !dd) {
        showError("æœˆã¨æ—¥ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚");
        return;
      }
      const gender = document.querySelector('input[name="gender"]:checked')?.value || "æœªé¸æŠ";
      const seed = `${todayKey()}|${mm}-${dd}|${gender}`;
      const p = CHARACTERS[pick(CHARACTERS.length, seed)];
      const line = p.lines[pick(p.lines.length, seed + "|l")];
      renderResult(p, line);
      // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«èª˜å°ï¼ˆçµæœã‚’ç¢ºå®Ÿã«è¦–ç•Œã¸ï¼‰
      resultEl.scrollIntoView({behavior:"smooth", block:"start"});
    });

    // ====== Bottom Nav ç¾åœ¨åœ°ãƒã‚¤ãƒ©ã‚¤ãƒˆ ======
    (function(){
      var path = location.pathname.split('/').pop() || 'index.html';
      document.querySelectorAll('.bottom-nav a').forEach(function(a){
        var href = a.getAttribute('href')||'';
        if(href.endsWith(path)){ a.classList.add('bn-accent'); a.setAttribute('aria-current','page'); }
      });
    })();
  </script>
</body>
</html>
