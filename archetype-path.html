<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é‹å‘½ã®éŠ€ç«œæš¦ï½œæ—¥ã€…ã®æŒ‡é‡</title>
  <meta name="description" content="åˆå›ã®æ°—è³ªè¨ºæ–­ã§ã‚ãªãŸã®é­‚ã®æ€§è³ªã‚’ç¢ºç«‹ã—ã€æ¯æ—¥ã®10å•ã§ä»Šæ—¥ã®ã€å½¹å‰²ã€ã‚’æˆã‘ã¾ã™ã€‚">
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #121821;
      --ink: #e9f1ff;
      --muted: #97a7c2;
      --line: #2a344d;
      --accent: #8dd0ff;
      --r: 16px;
      --tap: 48px
    }

    * {
      box-sizing: border-box
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", "Yu Gothic", sans-serif;
      line-height: 1.7
    }

    .wrap {
      max-width: 760px;
      margin: auto;
      padding: 16px 16px 92px
    }

    h1 {
      font-size: clamp(22px, 5vw, 28px);
      margin: 6px 0 8px
    }

    .lead {
      color: var(--muted);
      margin: 0 0 12px
    }

    .card {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: var(--r);
      margin: 12px 0;
      box-shadow: 0 8px 24px rgba(0, 0, 0, .25)
    }

    .card-h {
      padding: 12px 14px;
      font-weight: 800;
      border-bottom: 1px dashed rgba(141, 208, 255, .25)
    }

    .card-c {
      padding: 12px 14px
    }

    .btn {
      appearance: none;
      border: none;
      cursor: pointer;
      width: 100%;
      min-height: var(--tap);
      padding: 12px;
      border-radius: 12px;
      background: #17325a;
      border: 1px solid #2e4c79;
      color: #fff;
      font-weight: 800
    }

    .btn:hover {
      filter: brightness(1.05)
    }

    .btn.ghost {
      background: #121829
    }

    .grid2 {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px
    }

    @media(min-width:640px) {
      .grid2 {
        grid-template-columns: 1fr 1fr
      }
    }

    .q {
      margin: 10px 0
    }

    .q .t {
      font-weight: 700
    }

    /* 2æŠã‚¹ã‚¤ãƒƒãƒ */
    .toggle {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: 8px;
      margin-top: 8px
    }

    .toggle .opt {
      display: block;
      text-align: center;
      font-size: 14px;
      color: #cfe1ff
    }

    .switch {
      position: relative;
      width: 66px;
      height: 34px;
      background: #0f1626;
      border: 1px solid var(--line);
      border-radius: 999px;
      cursor: pointer
    }

    .switch input {
      display: none
    }

    .knob {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #2b446d;
      transition: transform .2s
    }

    .switch input:checked+.knob {
      transform: translateX(32px)
    }

    /* ã‚¢ãƒã‚¿ãƒ¼ï¼ˆã‚­ãƒ£ãƒ©ã‚¢ã‚¤ã‚³ãƒ³ï¼‰ */
    .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      display: inline-grid;
      place-items: center;
      font-weight: 800;
      color: #0b0f14
    }

    .av-alan {
      background: linear-gradient(135deg, #a8d8ff, #e6f3ff)
    }

    .av-drake {
      background: linear-gradient(135deg, #ff9a9e, #fecfef)
    }

    .av-nester {
      background: linear-gradient(135deg, #c2ffd8, #465efb)
    }

    .av-lilia {
      background: linear-gradient(135deg, #f6d365, #fda085)
    }

    .av-laila {
      background: linear-gradient(135deg, #d4c5ff, #8fb4ff)
    }

    .pill {
      display: inline-flex;
      gap: 6px;
      align-items: center;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(141, 208, 255, .12);
      border: 1px solid rgba(141, 208, 255, .25)
    }

    .result {
      animation: fade .6s ease both
    }

    @keyframes fade {
      from {
        opacity: 0;
        transform: translateY(8px)
      }

      to {
        opacity: 1;
        transform: none
      }
    }

    .bottom-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      background: #121821;
      border-top: 1px solid rgba(141, 208, 255, .25)
    }

    .bn-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      max-width: 40rem;
      margin: 0 auto
    }

    .bn-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      padding: 10px 0;
      color: var(--ink);
      text-decoration: none;
      font-size: 14px
    }

    .bn-accent {
      background: rgba(141, 208, 255, .15)
    }

    .note {
      font-size: 13px;
      color: var(--muted)
    }

    details.help {
      background: rgba(141, 208, 255, .06);
      border: 1px solid rgba(141, 208, 255, .18);
      border-radius: 12px;
      padding: 10px 12px
    }

    details.help summary {
      cursor: pointer;
      font-weight: 700
    }

    details.help+details.help {
      margin-top: 8px
    }

    .avatar-wrap {
      display: inline-grid;
      place-items: center
    }

    .avatar-img {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      display: block;
      overflow: hidden
    }

    .avatar-fallback {
      display: inline-grid;
      place-items: center
    }
  </style>
</head>

<body>
  <main class="wrap">
    <header>
      <h1>æ—¥ã€…ã®æŒ‡é‡</h1>
      <p class="lead">
        ã€Œãƒ«ãƒŠãƒ«ã®æ•™ãˆã‚’å—ã‘ç¶™ã„ã æ–°æ™‚ä»£ã®æ‹…ã„æ‰‹ã€ã¨ã—ã¦ã€<strong>åˆå›ã¯æ°—è³ª</strong>ã‚’ç¢ºç«‹ã—ã€<strong>ä»¥å¾Œã¯æ¯æ—¥ã®10å•</strong>ã§ä»Šæ—¥ã®å½¹å‰²ã‚’æˆã‹ã‚Šã¾ã™ã€‚</p>
      <details class="help">
        <summary>ä¸–ç•Œè¦³ãŒã‚ã‹ã‚‰ãªã„æ–¹ã¸</summary>
        <p class="note">ã“ã®ä½œå“ã§ã¯ã€éŠ€è‰²ã®å¤ä»£ç«œã€Œãƒ«ãƒŠãƒ«ã€ã®æ•™ãˆã‚’äººã€…ãŒå—ã‘ç¶™ãæ™‚ä»£ãŒèˆå°ã§ã™ã€‚<br>æ°—è³ªï¼ã‚ãªãŸã®â€œç‰©èªä¸Šã®æ€§è³ªâ€ã€å½¹å‰²ï¼â€œä»Šæ—¥ã®æ­©ãæ–¹â€ã€‚é›£ã—ãè€ƒãˆãšã€ç›´æ„Ÿã§é¸ã‚“ã§ãã ã•ã„ã€‚</p>
        <ul class="note" style="margin:.25rem 0 0 1rem">
          <li><strong>ã‚¢ãƒ©ãƒ³</strong>ï¼šäºŒã¤ã®ä¸–ç•Œã®æ¶ã‘æ©‹</li>
          <li><strong>ãƒ‰ãƒ¬ã‚¤ã‚¯</strong>ï¼šä»²é–“ã‚’å®ˆã‚‹å‹‡è€…</li>
          <li><strong>ãƒã‚¹ã‚¿ãƒ¼</strong>ï¼šé¢¨ã‚’èª­ã‚€è¦³å¯Ÿè€…</li>
          <li><strong>ãƒªãƒªã‚¢</strong>ï¼šè‡ªç”±ã«èˆã†ç²¾éœŠ</li>
          <li><strong>ãƒ©ã‚¤ãƒ©</strong>ï¼šå¤ãçŸ¥ã®èªã‚Šéƒ¨</li>
        </ul>
      </details>
    </header>

    <!-- Phase 1: æ°—è³ªè¨ºæ–­ï¼ˆåˆå›ã®ã¿è¡¨ç¤ºï¼‰ -->
    <section id="phase1" class="card" aria-labelledby="p1h" hidden>
      <div id="p1h" class="card-h">Phase 1ï¼šå‚¾å‘è¨ºæ–­ï¼ˆåˆå›ï¼‰</div>
      <div class="card-c">
        <p class="note">ç›´æ„Ÿã§4å•ã«ãŠç­”ãˆãã ã•ã„ã€‚çµæœã¯ã€Œã‚¢ãƒ©ãƒ³ï¼ãƒ‰ãƒ¬ã‚¤ã‚¯ï¼ãƒã‚¹ã‚¿ãƒ¼ï¼ãƒªãƒªã‚¢ï¼ãƒ©ã‚¤ãƒ©ã€ã®ã„ãšã‚Œã‹ã«ãªã‚Šã¾ã™ã€‚</p>

        <div class="q">
          <div class="t">Q1. äºŒã¤ã®ä¾¡å€¤ãŒå¯¾ç«‹ã™ã‚‹ã¨ãã€ã‚ãªãŸã¯ä½•ã‚’å„ªå…ˆã—ã¾ã™ã‹ï¼Ÿ</div>
          <div class="toggle" data-axis="logic">
            <span class="opt">èª¿å’Œ</span>
            <label class="switch"><input type="checkbox"><span class="knob"></span></label>
            <span class="opt">æ­£ã—ã•</span>
          </div>
        </div>
        <div class="q">
          <div class="t">Q2. é€²ã‚€ã¹ãé“ã‚’æ±ºã‚ã‚‹ã¨ãã€ã‚ãªãŸã¯ï¼Ÿ</div>
          <div class="toggle" data-axis="spirit">
            <span class="opt">é¢¨ã®å›ã</span>
            <label class="switch"><input type="checkbox"><span class="knob"></span></label>
            <span class="opt">å¤åœ°å›³</span>
          </div>
        </div>
        <div class="q">
          <div class="t">Q3. é¸ã³ã‚„ã™ã„è¡Œå‹•ã¯ï¼Ÿ</div>
          <div class="toggle" data-axis="vector">
            <span class="opt">å†…çœ</span>
            <label class="switch"><input type="checkbox"><span class="knob"></span></label>
            <span class="opt">è¡Œå‹•</span>
          </div>
        </div>
        <div class="q">
          <div class="t">Q4. äººã¨ã®è·é›¢æ„Ÿã¯ï¼Ÿ</div>
          <div class="toggle" data-axis="social">
            <span class="opt">ç‹¬ã‚Šã§æ•´ãˆã‚‹</span>
            <label class="switch"><input type="checkbox"><span class="knob"></span></label>
            <span class="opt">ä»²é–“ã¨å‹•ã</span>
          </div>
        </div>

        <div class="grid2" style="margin-top:10px">
          <button id="btnP1" class="btn">æ°—è³ªã‚’ç¢ºå®šã™ã‚‹</button>
          <button id="btnP1Reset" class="btn ghost" type="button">å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢</button>
        </div>
        <p class="note">â€» æ°—è³ªã¯ <code>localStorage.userArchetype</code> ã«ä¿å­˜ã•ã‚Œã¾ã™ï¼ˆç«¯æœ«ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ã€‚</p>
      </div>
    </section>

    <!-- Phase 1 çµæœï¼ˆç¢ºå®šå¾Œå¸¸ã«è¡¨ç¤ºï¼‰ -->
    <section id="archetypeBox" class="card result" aria-live="polite" hidden>
      <div class="card-h">ã‚ãªãŸã®æ°—è³ª</div>
      <div class="card-c" id="archText"></div>
    </section>

    <!-- Phase 2: æ¯æ—¥ã®10å•ï¼ˆ2æŠUIï¼‰ â†’ å½¹å‰²æ±ºå®š -->
    <section id="phase2" class="card" aria-labelledby="p2h" hidden>
      <div id="p2h" class="card-h">Phase 2ï¼šé­‚ã¸ã®åã®è³ªå•ï¼ˆä»Šæ—¥ã®å½¹å‰²ã‚’æ±ºã‚ã‚‹ï¼‰</div>
      <div class="card-c" id="qList"></div>
      <div class="card-c">
        <div class="grid2">
          <button id="btnEval" class="btn">ä»Šæ—¥ã®å½¹å‰²ã‚’æˆã‹ã‚‹</button>
          <button id="btnClearQ" class="btn ghost" type="button">å›ç­”ã‚¯ãƒªã‚¢</button>
        </div>
        <p class="note" style="margin-top:6px">â€» 2æŠã§è¿·ã£ãŸã‚‰ã€Œç›´æ„Ÿã€ã‚’å„ªå…ˆã—ã¦ãã ã•ã„ã€‚æ—¥ã€…ã®å›ç­”ã¯ä¿å­˜ã—ã¾ã›ã‚“ã€‚</p>
      </div>
    </section>

    <!-- Phase 3+4: å½¹å‰²ï¼‹çµæœ -->
    <section id="resultBox" class="card result" hidden>
      <div class="card-h">ä»Šæ—¥ã®æˆä¸ï¼šå½¹å‰²ã¨éŠ€ç«œã®è¨€è‘‰</div>
      <div class="card-c" id="roleText"></div>
    </section>
  </main>

  <!-- Bottom Nav (3 tabs) -->
  <nav class="bottom-nav" aria-label="ä¸»è¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
    <div class="bn-grid">
      <a class="bn-btn" href="./index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
      <a class="bn-btn" href="./notice.html">ğŸ“£ ãŠçŸ¥ã‚‰ã›</a>
      <a class="bn-btn" href="./mypage.html">ğŸ‘¤ ãƒã‚¤ãƒšãƒ¼ã‚¸</a>
    </div>
  </nav>

  <script>
    /* =========================================================
     * ArchetypePath Core (Refactored)
     * - Storage: localStorage ã¯ archetype_id ã®ã¿
     * - Avatar : ç”»åƒè§£æ±ºï¼ˆid â†’ name ã®é †ã§æ¤œç´¢ï¼‰ï¼‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
     * - Render : å‘¼ã³å‡ºã—å´ã¯ renderArchetypeBox(archetype) ã ã‘
     * =======================================================*/

    /* ---------- 0) å°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---------- */
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => [...root.querySelectorAll(sel)];
    const esc = (s) => String(s ?? "").replace(/[&<>"']/g, m => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m]));

    /* ---------- 1) Storageï¼ˆæœ€å°ä¿å­˜ï¼šarchetype_id ã®ã¿ï¼‰ ---------- */
    const ArchetypeStore = (() => {
      const KEY = "archetype_id";

      // äº’æ›: æ—§ã‚­ãƒ¼ãŒæ®‹ã£ã¦ã„ãŸã‚‰ç§»è¡Œã—ã¦å‰Šé™¤
      const legacy = localStorage.getItem("userArchetype");
      if (legacy && !localStorage.getItem(KEY)) {
        try {
          const obj = JSON.parse(legacy);
          if (obj && typeof obj.id === "string") localStorage.setItem(KEY, obj.id);
        } catch (_) { }
        localStorage.removeItem("userArchetype");
      }
      // ä½™è¨ˆãªã‚­ãƒ¼ã¯è§¦ã‚‰ãªã„ï¼ˆæœ¬ãƒšãƒ¼ã‚¸å¤–ã®æ©Ÿèƒ½ã«å½±éŸ¿ã•ã›ãªã„ï¼‰

      return Object.freeze({
        get() { return localStorage.getItem(KEY); },
        set(id) { if (typeof id === "string" && id) localStorage.setItem(KEY, id); },
        clear() { localStorage.removeItem(KEY); }
      });
    })();

    /* ---------- 2) Avatar è§£æ±ºï¼ˆid â†’ name ã®é †ã§ãƒãƒƒãƒ—ï¼‰ ---------- */
    /* å¿…è¦ã«å¿œã˜ã¦è¿½è¨˜ã—ã¦ãã ã•ã„ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åè¦ç´„: char-*.jpgï¼‰ */
    const AVATAR_BY_ID = Object.freeze({
      alan: "assets/char-alan.jpg",
      drake: "assets/char-drake.jpg",
      nester: "assets/char-nester.jpg",
      lilia: "assets/char-lilia.jpg",
      laila: "assets/char-laila.jpg",
      lunal: "assets/char-lunal.jpg",
      magnus: "assets/char-magnus.jpg",
      king: "assets/char-king.jpg",
      mireia: "assets/char-mireia.jpg"
    });
    const AVATAR_BY_NAME = Object.freeze({
      "ã‚¢ãƒ©ãƒ³": "assets/char-alan.jpg",
      "ãƒ‰ãƒ¬ã‚¤ã‚¯": "assets/char-drake.jpg",
      "ãƒã‚¹ã‚¿ãƒ¼": "assets/char-nester.jpg",
      "ãƒªãƒªã‚¢": "assets/char-lilia.jpg",
      "ãƒ©ã‚¤ãƒ©": "assets/char-laila.jpg",
      "ãƒ«ãƒŠãƒ«": "assets/char-lunal.jpg",
      "ãƒã‚°ãƒŠã‚¹": "assets/char-magnus.jpg",
      "ãƒã‚¯ã‚µãƒ¼ãƒˆ": "assets/char-king.jpg",
      "ãƒŸãƒ¬ã‚¤ã‚¢": "assets/char-mireia.jpg"
    });

    const Avatar = Object.freeze({
      /**
       * @param {Object} a - archetype-like object
       * @param {string=} a.id   ä¾‹: 'alan'
       * @param {string=} a.name ä¾‹: 'ã‚¢ãƒ©ãƒ³ã®é­‚ï¼ˆâ€¦ï¼‰'
       * @param {string=} a.initials ä¾‹: 'AL'
       * @param {string=} a.av æ—¢å­˜ã®å††ã‚¢ã‚¤ã‚³ãƒ³ã‚¯ãƒ©ã‚¹
       * @returns {HTMLElement} wrapper è¦ç´ ï¼ˆimg ã¾ãŸã¯ fallback span ã‚’å†…åŒ…ï¼‰
       */
      render(a = {}) {
        const wrap = document.createElement("span");
        wrap.className = "avatar-wrap";

        // 1) id â†’ 2) nameï¼ˆå¾Œç½®ãã®ä¿®é£¾èªã‚’é™¤å»ï¼‰â†’ 3) fallback
        const byId = AVATAR_BY_ID[(a.id || "").trim()];
        const plainName = String(a.name || "").replace(/ã®é­‚.*$/, "").trim();
        const byName = AVATAR_BY_NAME[plainName];

        const src = byId || byName || null;
        if (src) {
          const img = document.createElement("img");
          img.className = "avatar-img";
          img.src = src;
          img.alt = "";                 // è£…é£¾æ‰±ã„ï¼ˆéš£ã®ãƒ†ã‚­ã‚¹ãƒˆã§è­˜åˆ¥ï¼‰
          img.decoding = "async";
          img.loading = "lazy";
          wrap.appendChild(img);
        } else {
          const span = document.createElement("span");
          span.className = "avatar-fallback avatar " + esc(a.av || "");
          span.setAttribute("aria-hidden", "true");
          span.textContent = a.initials || "ï¼Ÿ";
          wrap.appendChild(span);
        }
        return wrap;
      }
    });

    /* ---------- 3) Archetype Box ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆå‘¼ã³å‡ºã—APIï¼‰ ---------- */
    /**
     * archetype ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆä¾‹ï¼ˆæ—¢å­˜æƒ³å®šï¼‰:
     * { id:'alan', name:'ã‚¢ãƒ©ãƒ³ã®é­‚ï¼ˆâ€¦ï¼‰', desc:'èª¬æ˜â€¦', av:'av-alan', initials:'AL' }
     */
    function renderArchetypeBox(archetype) {
      const box = $("#archetypeBox");
      const text = $("#archText");
      if (!box || !text) return;

      if (!archetype) {
        box.hidden = true;
        return;
      }
      box.hidden = false;

      // Avatarã‚’å…ˆã«ç”Ÿæˆï¼ˆè£…é£¾ç”»åƒ or ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
      const avatarEl = Avatar.render(archetype);

      // å†…å®¹ã‚’ã‚¯ãƒªã‚¢ã—ã¦DOMã§çµ„ã¿ç«‹ã¦ï¼ˆXSSå¯¾ç­–ï¼štextContentã§åŸ‹ã‚ã‚‹ï¼‰
      text.innerHTML = `
    <div class="pill">ç¢ºå®šæ¸ˆã¿ã®æ°—è³ª</div>
    <div class="arch-line" style="display:flex;align-items:center;gap:10px;margin-top:6px">
      <span class="arch-avatar-slot"></span>
      <div>
        <h3 class="arch-name" style="margin:.25rem 0 0"></h3>
        <p class="note arch-desc" style="margin:.25rem 0 0"></p>
      </div>
    </div>
    <div class="grid2" style="margin-top:10px">
      <button class="btn ghost" id="btnChange">æ°—è³ªã‚’ã‚„ã‚Šç›´ã™ï¼ˆã“ã®ç«¯æœ«ã®ã¿ï¼‰</button>
      <a class="btn" href="#p2h">åã®è³ªå•ã¸é€²ã‚€</a>
    </div>`;

      $(".arch-avatar-slot", text).appendChild(avatarEl);
      $(".arch-name", text).textContent = archetype.name || "â€”";
      $(".arch-desc", text).textContent = archetype.desc || "";

      $("#btnChange", text)?.addEventListener("click", () => {
        if (confirm("æ°—è³ªã‚’æœªè¨­å®šã«æˆ»ã—ã¾ã™ã‹ï¼Ÿï¼ˆã“ã®ç«¯æœ«ã®ã¿ï¼‰")) {
          ArchetypeStore.clear();
          // å‘¼ã³å‡ºã—å´ã® apply()/å†æç”»ã‚’æƒ³å®š
          (window.apply?.call ? window.apply() : location.reload());
        }
      });
    }

    /* ---------- 4) å…¬é–‹APIï¼ˆå¿…è¦ãªã‚‰ä»–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‹ã‚‰åˆ©ç”¨å¯ï¼‰ ---------- */
    window.ArchetypePath = Object.freeze({
      ArchetypeStore,
      Avatar,
      renderArchetypeBox
    });
    const ARCHETYPES = Object.freeze({
  alan:  { id:'alan',  name:'ã‚¢ãƒ©ãƒ³',  desc:'', av:'av-alan',  initials:'AL' },
  drake: { id:'drake', name:'ãƒ‰ãƒ¬ã‚¤ã‚¯',desc:'', av:'av-drake', initials:'DR' },
  nester:{ id:'nester',name:'ãƒã‚¹ã‚¿ãƒ¼',desc:'', av:'av-nester',initials:'NE' },
  lilia: { id:'lilia', name:'ãƒªãƒªã‚¢',  desc:'', av:'av-lilia', initials:'LI' },
  laila: { id:'laila', name:'ãƒ©ã‚¤ãƒ©',  desc:'', av:'av-laila', initials:'LA' }
});

// ===== è¿½åŠ : ç¾åœ¨ã®æ°—è³ªã‚’å–å¾—ï¼ˆlocalStorage ã® archetype_id ã‚’è§£æ±ºï¼‰ =====
function getArchetype(){
  const id = ArchetypePath.ArchetypeStore.get();
  return (id && ARCHETYPES[id]) ? ARCHETYPES[id] : null;
}

// ===== è¿½åŠ : åˆæœŸåŒ–ï¼ˆè¡¨ç¤ºã®å‡ºã—åˆ†ã‘ï¼†æç”»å®Ÿè¡Œï¼‰ =====
function show(el, on){ if(el) el.hidden = !on; }

function apply(){
  const a = getArchetype();
  show(document.getElementById('phase1'), !a);   // æœªè¨­å®šãªã‚‰ Phase1 ã‚’è¡¨ç¤º
  show(document.getElementById('archetypeBox'), !!a);
  show(document.getElementById('phase2'), !!a);  // å¿…è¦ã«å¿œã˜ã¦åˆ¶å¾¡
  if (a) ArchetypePath.renderArchetypeBox(a);    // â˜… ã“ã“ã§æç”»
}

// DOM æº–å‚™å¾Œã«å®Ÿè¡Œ
document.addEventListener('DOMContentLoaded', apply);
  </script>

</body>

</html>