<!doctype html>
<html lang="ja">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>運命の銀竜暦｜今日の占いを受け取る</title>
  <meta name="description" content="銀竜の言葉を継ぐ者へワンタップで今日の占い、物語、竜の食卓">
  <link rel="stylesheet" href="./assets/css/app.css">
  <link rel="stylesheet" href="./assets/css/components.css">
  <link rel="stylesheet" href="./assets/css/index.css">
  
  <link rel="preload" href="./assets/data/fortune_messages.json" as="fetch" crossorigin>
  
  <style>
    /* カレンダーUI改善のための追加CSS */
    .calendar-container {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 24px;
      margin: 16px 0;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      color: white;
    }
    
    .calendar-header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .calendar-title {
      color: #ffffff;
      font-size: 1.5rem;
      font-weight: bold;
      margin: 0 0 8px 0;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .calendar-navigation {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      padding: 12px 16px;
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .calendar-nav-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }
    
    .calendar-nav-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    
    .calendar-date {
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      color: #ffffff;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
      min-width: 150px;
    }
    
    .calendar-holiday {
      text-align: center;
      margin-bottom: 16px;
      padding: 8px 16px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      font-size: 14px;
      color: #ffeaa7;
      font-weight: 500;
    }
    
    .calendar-quote {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 16px;
      backdrop-filter: blur(5px);
      border: 1px solid rgba(255, 255, 255, 0.15);
    }
    
    .calendar-quote blockquote {
      margin: 0;
      position: relative;
      padding: 0;
    }
    
    .calendar-quote blockquote::before {
      content: '"';
      position: absolute;
      left: -10px;
      top: -5px;
      font-size: 2rem;
      color: rgba(255, 255, 255, 0.3);
      line-height: 1;
    }
    
    .calendar-quote p {
      font-style: italic;
      line-height: 1.6;
      margin: 0;
      color: #ffffff;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }
    
    .quote-author {
      text-align: right;
      margin-top: 12px;
      font-size: 14px;
      color: rgba(255, 255, 255, 0.8);
      font-weight: 500;
    }
    
    .calendar-actions {
      text-align: center;
    }
    
    .calendar-today-btn {
      background: linear-gradient(45deg, #74b9ff, #0984e3);
      border: none;
      color: white;
      padding: 10px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(9, 132, 227, 0.3);
    }
    
    .calendar-today-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(9, 132, 227, 0.4);
    }
    
    .skeleton {
      background: linear-gradient(90deg, rgba(255,255,255,0.3) 25%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.3) 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite;
      border-radius: 4px;
      display: inline-block;
      height: 1em;
      width: 200px;
    }
    
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <section class="hero" aria-label="今日の占い">
      <h1>銀竜からのことばを<br>ワンタップで受け取ろう</h1>
      <p class="lead">無料で「総合運」を即表示　有料で <strong>9カテゴリ</strong> が毎日開放（健康・平穏・生活・対人・成長・目的・自由・娯楽・評価）</p>
      <div class="cta">
        <button id="ctaGet" class="btn" type="button" aria-describedby="cta-description">今日の占いを受け取る</button>
        <a class="btn secondary" href="./signup.html" aria-describedby="signup-description">会員登録</a>
      </div>
      <p id="cta-description" class="visually-hidden">無料で今日の占い結果を表示します</p>
      <p id="signup-description" class="visually-hidden">有料会員登録ページに移動します</p>
      <a href="#calendarQuote" class="scroll-hint" aria-label="下へスクロール">▼</a>
    </section>

    <section class="card" aria-labelledby="chooseCharacter">
      <h2 id="chooseCharacter" class="label">語り手を選ぶ</h2>
      <div class="character-grid" id="charButtons" role="group" aria-labelledby="chooseCharacter">
        <button type="button" data-char="ルナル" data-archid="lunal" class="character-button" aria-label="ルナルを選択">
          <img src="./assets/char-lunal.jpg" alt="" role="presentation">
          <div>ルナル</div>
        </button>
        <button type="button" data-char="アラン" data-archid="alan" class="character-button" aria-label="アランを選択">
          <img src="./assets/char-alan.jpg" alt="" role="presentation">
          <div>アラン</div>
        </button>
        <button type="button" data-char="リリア" data-archid="lilia" class="character-button" aria-label="リリアを選択">
          <img src="./assets/char-lilia.jpg" alt="" role="presentation">
          <div>リリア</div>
        </button>
      </div>
      <p class="meta">選ぶたび当日の結果を表示　日付が変わると更新</p>
    </section>

    <section id="result" class="card" aria-live="polite" style="display:none">
      <h2 class="label">今日の結果</h2>
      <div class="result-content" id="resultBox">
      </div>
    </section>

    <section id="calendarQuote" class="card" aria-live="polite">
      <div class="calendar-container">
        <div class="calendar-header">
          <h2 class="calendar-title">銀竜暦カレンダー</h2>
        </div>
        
        <div class="calendar-navigation">
          <button type="button" class="calendar-nav-btn" id="btnPrevDay" aria-label="前日へ移動">
            ← 前日
          </button>
          <div class="calendar-date" id="calDate" role="heading" aria-level="3">
            <!-- 日付がここに表示されます -->
          </div>
          <button type="button" class="calendar-nav-btn" id="btnNextDay" aria-label="翌日へ移動">
            翌日 →
          </button>
        </div>
        
        <div class="calendar-holiday" id="calHoliday">
          <!-- 祝日情報がここに表示されます -->
        </div>
        
        <div class="calendar-quote" id="calQuote">
          <blockquote>
            <p id="quoteText">
              <span class="skeleton" aria-label="読み込み中"></span>
            </p>
          </blockquote>
          <footer id="quoteAuthor" class="quote-author">
            <span class="skeleton" aria-label="読み込み中"></span>
          </footer>
        </div>
        
        <div class="calendar-actions">
          <button type="button" class="calendar-today-btn" id="btnToday" aria-label="今日へ戻る">
            今日
          </button>
        </div>
      </div>
    </section>

    <!-- ===== Content Hubs ===== -->
    <section class="content-grid" aria-label="関連コンテンツ">
      <h2 class="visually-hidden">物語と食卓</h2>
      
      <a href="./about.html" class="content-tile">
        <h3>銀竜の言葉を継ぐものとは</h3>
        <p>物語の世界をより深く楽しんでいただけます</p>
      </a>
      
      <a href="./partner.html" class="content-tile">
        <h3>今日の導き手</h3>
        <p>銀竜の言葉を継ぐもの中から今日の導き手を診断します</p>
      </a>
      
      <a href="./archetype-path.html" class="content-tile">
        <h3>日々の指針</h3>
        <p>今日の行動を考えるためのヒントをまとめています</p>
      </a>
      
      <a href="./dragon-table.html" class="content-tile">
        <h3>竜の食卓</h3>
        <p>現実に再現できる異界のレシピ　今日の一皿とキャラ別の食卓</p>
      </a>
      
      <a href="./serial.html" class="content-tile">
        <h3>七夜の語り巻</h3>
        <p>継承者たちの短編連作</p>
      </a>
      
      <a href="./novel.html" class="content-tile">
        <h3>短編小説</h3>
        <p>銀の竜が遺した言葉は、未来をつなぐ翼になる</p>
      </a>
      
      <a href="./zodiac.html" class="content-tile">
        <h3>星座診断</h3>
        <p>12星座×9カテゴリの見取り図</p>
      </a>
      
      <a href="./teachings.html" class="content-tile">
        <h3>聖竜教の教え</h3>
        <p>最古の賢人ライラの相談部屋</p>
      </a>
      
      <a href="./music.html" class="content-tile">
        <h3>エテルナリア音楽館</h3>
        <p>エテルナリア大陸の音楽を気分で探す</p>
      </a>
      
      <a href="./wallpaper.html" class="content-tile">
        <h3>銀竜の加護</h3>
        <p>銀竜暦の美しい世界観を壁紙で体感</p>
      </a>
    </section>

    <footer role="contentinfo">
      <p>&copy; 運命の銀竜暦</p>
    </footer>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav" aria-label="主要ナビゲーション" role="navigation">
    <div class="bn-grid">
      <a class="bn-btn" href="./index.html" aria-current="page">
        <span class="bn-icon" aria-hidden="true">🏠</span>
        <span>ホーム</span>
      </a>
      <a class="bn-btn" href="./notice.html">
        <span class="bn-icon" aria-hidden="true">📣</span>
        <span>お知らせ</span>
      </a>
      <a class="bn-btn" href="./mypage.html">
        <span class="bn-icon" aria-hidden="true">👤</span>
        <span>マイページ</span>
      </a>
    </div>
  </nav>

  <div id="errorNotification" class="error-notification" hidden role="alert" aria-live="assertive">
    <p id="errorMessage"></p>
    <button type="button" id="closeError" class="close-error" aria-label="エラーを閉じる">×</button>
  </div>

  <script src="./assets/js/core.js"></script>
  <script src="./assets/js/index.js"></script>
</body>

</html>