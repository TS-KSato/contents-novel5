/* teachings.css — 固有スタイル（app.css / components.css 前提） */
:root{
  --accent-2:#1a3358; --accent-2-b:#34507c;
}

/* ヘッダー（アプリバー） */
header.appbar{
  position:sticky; top:0; z-index:10;
  background:#10162a; border-bottom:1px solid var(--line);
  backdrop-filter:blur(8px);
}
.appbar .inner{display:flex;align-items:center;gap:.75rem;padding:.75rem var(--pad)}
.appbar .avatar{
  width:36px;height:36px;border-radius:50%;
  display:grid;place-items:center;background:linear-gradient(135deg,#1a3358,#0f1a34);
  color:#cfe1ff;font-weight:700;border:1px solid var(--line);font-size:1rem;
}
.appbar h1{margin:0;font-size:1rem;letter-spacing:.02em;color:#fff;}
.appbar .sub{display:block;color:var(--muted);font-size:.78rem;}

/* 検索 */
.search{
  display:flex;gap:.5rem;align-items:center;
  border:1px solid var(--line);background:#10162a;border-radius:.675rem;
  padding:.5rem .75rem;transition:all 0.2s ease;
}
.search:focus-within{
  border-color:var(--accent-2-b);background:#14203a;
}
.search input{
  flex:1;border:0;background:transparent;color:var(--ink);outline:none;
  font-size:.95rem;
}
.search input::placeholder{
  color:var(--muted);
}
.search svg{
  color:var(--muted);transition:color 0.2s ease;
}
.search:focus-within svg{
  color:var(--accent-2-b);
}

/* グリッドレイアウト */
.grid{display:grid;grid-template-columns:1fr;gap:var(--gap);}

/* 相談者一覧 */
.rooms{
  display:grid;gap:.5rem;max-height:45vh;overflow-y:auto;
  scrollbar-width:thin;scrollbar-color:var(--accent-2-b) transparent;
}
.rooms::-webkit-scrollbar{
  width:8px;
}
.rooms::-webkit-scrollbar-track{
  background:transparent;
}
.rooms::-webkit-scrollbar-thumb{
  background:var(--accent-2-b);border-radius:4px;
}

.room-item{
  display:flex;gap:.75rem;align-items:flex-start;width:100%;
  background:#0f162b;border:1px solid var(--line);border-radius:.75rem;
  padding:.625rem .875rem;transition:all 0.2s ease;cursor:pointer;
  text-align:left;
}
.room-item:hover{
  background:#14203a;border-color:#34507c;transform:translateY(-1px);
}
.room-item:focus-visible{
  outline:2px solid var(--accent);outline-offset:2px;
}
.room-item.active{
  background:#16233c;border-color:#3a4b78;
  box-shadow:0 2px 8px rgba(26,51,88,0.2);
}

.room-item .avatar{
  width:40px;height:40px;border-radius:50%;flex-shrink:0;
  display:grid;place-items:center;
  background:linear-gradient(135deg,#1a3358,#0f1a34);
  color:#cfe1ff;font-weight:700;border:1px solid var(--line);
  font-size:1rem;margin-top:0.125rem;
}
.room-item .avatar.fallback{
  background:linear-gradient(135deg,var(--accent-2),var(--accent-2-b));
}

.room-item .meta{
  flex:1;min-width:0;
}
.r-name{
  font-weight:800;font-size:1.05rem;line-height:1.25;color:#fff;
  overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
  margin-bottom:0.25rem;
}
.r-meta{
  color:var(--muted);font-size:.84rem;line-height:1.3;
  overflow:hidden;text-overflow:ellipsis;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;
  white-space:normal;
}

/* メッセージスレッド */
.thread{
  display:grid;gap:.75rem;max-height:60vh;overflow-y:auto;
  scrollbar-width:thin;scrollbar-color:var(--accent-2-b) transparent;
}
.thread::-webkit-scrollbar{
  width:8px;
}
.thread::-webkit-scrollbar-track{
  background:transparent;
}
.thread::-webkit-scrollbar-thumb{
  background:var(--accent-2-b);border-radius:4px;
}

.section-date{
  text-align:center;color:#c0cbed;font-size:.78rem;
  margin:0.5rem 0;padding:0.25rem 0.5rem;
  background:rgba(192,203,237,0.1);border-radius:0.5rem;
}

.msg-header{
  margin-bottom:1rem;padding:0.75rem;
  background:#0f162b;border-radius:0.75rem;
  border:1px solid var(--line);
}
.msg-header .name{
  font-weight:700;color:#fff;margin-bottom:0.25rem;
}
.msg-header .summary{
  color:var(--muted);font-size:0.9rem;line-height:1.4;
}
.msg-header .meta-info{
  color:var(--muted);font-size:0.8rem;margin-top:0.5rem;
  display:flex;gap:0.5rem;flex-wrap:wrap;
}
.msg-header .meta-info span{
  padding:0.125rem 0.5rem;background:rgba(26,51,88,0.3);
  border-radius:0.25rem;
}

.msg{
  max-width:78%;background:#121829;border:1px solid var(--line);
  border-radius:.75rem;padding:.5rem .75rem;margin-bottom:0.5rem;
}
.msg .who{
  font-weight:700;font-size:.85rem;margin-bottom:0.25rem;
  color:var(--accent-2-b);
}
.msg .text{
  white-space:pre-wrap;word-break:break-word;line-height:1.6;
  color:var(--ink);
}
.msg .meta{
  color:var(--muted);font-size:.75rem;margin-top:.5rem;
  text-align:right;
}

.msg.laila{
  margin-left:auto;background:#16233c;border-color:#2f3b63;
}
.msg.laila .who{
  color:#e7f2ff;
}

/* 空状態 */
.empty{
  text-align:center;color:var(--muted);padding:1.25rem;
  font-style:italic;
}

/* レスポンシブ */
@media (min-width:1024px){
  .grid{
    grid-template-columns:1fr 1fr;
    grid-template-rows:auto 1fr;
  }
  .grid > section:first-child{
    grid-column:1/-1;
  }
  .rooms{
    max-height:70vh;
  }
  .thread{
    max-height:70vh;
  }
}

@media (max-width:820px){
  .rooms{max-height:32vh;}
  .thread{max-height:40vh;}
  .msg{max-width:90%;}
}

@media (prefers-contrast:more){
  .r-name{color:#fff;}
  .room-item{border-color:#3f4b78;}
  .room-item.active{box-shadow:inset 4px 0 0 0 var(--accent);}
  .msg{border-width:2px;}
}