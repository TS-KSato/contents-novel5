<!DOCTYPE html>
];


const list = document.getElementById('list');
const filters = document.getElementById('filters');
let current = 'all';


// 季節自動判定（現在の月で初期フィルタ）
(function initSeason(){
const m = new Date().getMonth()+1;
const s = m<=2? 'winter' : m<=5? 'spring' : m<=8? 'summer' : m<=11? 'autumn' : 'winter';
current = s; // 初期は今の季節を優先表示
})();


function draw(){
list.innerHTML = '';
// 今季節のものを先頭に、それ以外→フィルタ適用
const sorted = [...WALLS].sort((a,b)=> (a.season===current? -1:1) - (b.season===current? -1:1));
sorted.filter(w=>{
if(current==='all') return true;
if(['spring','summer','autumn','winter'].includes(current)) return w.season===current;
if(current==='wind') return w.archetype==='Wind';
if(current==='knight') return w.archetype==='Knight';
return true;
}).forEach(w=>{
const card = document.createElement('article');
card.className = 'card';
card.innerHTML = `
<div class="hero" role="img" aria-label="${w.name}"></div>
<div class="wrap">
<div class="name">${w.name}</div>
<div class="cap">${w.caption}</div>
<div class="row">
<span class="pill">${labelSeason(w.season)}</span>
<span class="pill">${w.archetype}</span>
<button class="btn" data-id="${w.id}" type="button">ダウンロード</button>
</div>
</div>`;
list.appendChild(card);
});
// チップのアクティブ表示合わせ
document.querySelectorAll('.chip').forEach(x=> x.classList.toggle('active', x.dataset.t===current || (current==='all'&&x.dataset.t==='all')));
}


function labelSeason(s){return ({spring:'春',summer:'夏',autumn:'秋',winter:'冬'})[s]||s}


filters.addEventListener('click',(e)=>{
const b = e.target.closest('.chip'); if(!b) return;
current = b.dataset.t;
draw();
});


addEventListener('click',(e)=>{
const btn = e.target.closest('button.btn'); if(!btn) return;
alert('デモ：'+btn.dataset.id+' の高解像度DLは本番で有効化されます');
});


draw();
</script>
</body>
</html>
