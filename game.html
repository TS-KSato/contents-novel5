<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>銀竜競技：アランの調和試技</title>
  <meta name="description" content="スマホ向け・短時間・低負荷の調和制御競技ゲーム。アランとなって地形と天候に適応し、最適な魔法制御でライバルに勝とう。">
  <link rel="preload" href="assets/js/game.js" as="script">
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">銀竜競技</div>
    <div class="meta"><span id="version"></span></div>
  </header>

  <main class="container">
    <!-- Screen: Home -->
    <section id="screen-home" class="screen active" aria-label="ホーム">
      <h1 class="title">アランの調和試技</h1>
      <p class="subtitle">短時間 × 低負荷 × 調和重視</p>
      <div class="card grid2">
        <div>
          <label class="label">フィールド</label>
          <select id="fieldSelect" class="select"></select>
        </div>
        <div>
          <label class="label">天候</label>
          <select id="weatherSelect" class="select"></select>
        </div>
        <div>
          <label class="label">対戦相手</label>
          <select id="rivalSelect" class="select"></select>
        </div>
        <div>
          <label class="label">ラウンド数</label>
          <select id="roundsSelect" class="select">
            <option value="3" selected>3</option>
            <option value="5">5</option>
          </select>
        </div>
      </div>

      <div class="btn-row">
        <button id="btnStart" class="btn primary">試合開始</button>
        <button id="btnHow" class="btn">遊び方</button>
      </div>

      <div class="panel info">
        <div>ハイスコア：<span id="highScore">0</span>　最上段位：<span id="bestRank">—</span></div>
        <div class="tip">※音はタップ後のみ再生されます / 通信は不要（素材内蔵）</div>
      </div>
    </section>

    <!-- Screen: HowTo -->
    <section id="screen-how" class="screen" aria-label="遊び方">
      <h2>遊び方</h2>
      <ol class="howto">
        <li>針が左右に往復します。タイミングよく<strong>タップ</strong>で停止。</li>
        <li><span class="badge yellow">黄</span>（パーフェクト）：最高評価 / <span class="badge green">緑</span>（良好）：中評価 / その他：低評価。</li>
        <li>環境（風/霧など）や相手特性で針の動きが変化します。</li>
        <li>各ラウンドの合計スコアで勝敗が決まります。1試合は約60〜90秒。</li>
      </ol>
      <div class="btn-row">
        <button class="btn" id="btnBackHome">戻る</button>
      </div>
    </section>

    <!-- Screen: Match -->
    <section id="screen-match" class="screen" aria-label="試合">
      <div class="hud">
        <div class="hud-left">
          <div>段位: <span id="rankName">—</span></div>
          <div>フィールド: <span id="fieldName">—</span> / 天候: <span id="weatherName">—</span></div>
        </div>
        <div class="hud-right">
          <div>ラウンド <span id="roundNow">1</span>/<span id="roundMax">3</span></div>
          <div>スコア あなた <span id="scoreP">0</span> : <span id="scoreR">0</span> 相手</div>
        </div>
      </div>

      <div class="arena" id="arena" role="application" aria-label="調和メーター領域">
        <canvas id="meter" width="360" height="120"></canvas>
        <div class="meter-legend">
          <span class="badge yellow">パーフェクト</span>
          <span class="badge green">良好</span>
        </div>
        <div class="output-band" id="outputBand">最適出力帯: —</div>
        <div class="log" id="combatLog" aria-live="polite"></div>
      </div>

      <div class="btn-row">
        <button id="btnTap" class="btn primary large">タップで停止</button>
        <button id="btnPause" class="btn">一時停止</button>
      </div>
    </section>

    <!-- Screen: Result -->
    <section id="screen-result" class="screen" aria-label="結果">
      <h2>結果</h2>
      <p class="result-line"><strong id="resultTitle">勝敗</strong></p>
      <div class="panel">
        <div>あなた：<span id="finalP">0</span> 点　相手：<span id="finalR">0</span> 点</div>
        <div>ハイスコア更新：<span id="hsUpdated">—</span></div>
      </div>
      <div class="btn-row">
        <button id="btnRetry" class="btn primary">同条件で再戦</button>
        <button id="btnHome" class="btn">ホームへ</button>
      </div>
    </section>
  </main>

  <footer class="foot">
    <small>© 2025 Aural Harmony Prototype / MIT</small>
  </footer>

  <script>window.__BUILD__ = { version: "v1.0.0", builtAt: "2025-10-03T05:14:28.944855" };</script>
  <script src="assets/js/game.js" defer></script>
</body>
</html>
